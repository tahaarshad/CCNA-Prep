# Network Management
## Cisco Discovery Protocol
Layer 2. Discover cisco devices, their names and type of interfaces. Send advertisements periodically.

### Configure and verify
- cdp run
- no cdp run
- show cdp

To disable or enable on specifici interfaces:
- int g0/0
- cdp enable or no cdp enable

view:
- show cdp neighbors
- show cdp interface: for only cdp enabled interfaces

Device identifiers - This is the host name of the neighbor device (S1).
Port identifier - This is the name of the local and remote port (G0/0/1 and F0/5, respectively).
Capabilities list - This shows whether the device is a router or a switch (S for switch; I for IGMP is beyond scope for this course)
Platform - This is the hardware platform of the device (WS-C3560 for Cisco 3560 switch).

The network administrator uses show cdp neighbors detail to discover the IP address for S1

## Link Layer Discovery Protocol
Same as CDP but vendor-neutral

### Configure and Verify
- lldp run
- no lldp run

Specific interface
- int g0/0
- lldp transmit
- lldp receive

verify
- show lldp
- show lldp neighbors
- show lldp neighbors detail


## NEtwork Time Protocol
Configure date and time on devices

Manually configure without ntp
- R1# clock set 16:01:00 sept 25 2020 

NTP will allow all devices to sync their time rather than manually configure each device.
NTP uses UDP port 123

NTP networks use a hierarchical system of time sources. Each level in this hierarchical system is called a stratum. The stratum level is defined as the number of hop counts from the authoritative source. The synchronized time is distributed across the network by using NTP. The figure displays a sample NTP network.

NTP servers are arranged in three levels showing the three strata. Stratum 1 is connected to Stratum 0 clocks.
Smaller stratum numbers indicate that the server is closer to the authorized time source than larger stratum numbers. The larger the stratum number, the lower the stratum level. The max hop count is 15. Stratum 16, the lowest stratum level, indicates that a device is unsynchronized. Time servers on the same stratum level can be configured to act as a peer with other time servers on the same stratum level for backup or verification of time.

### Configure and verify
- first check clock
    - R1# show clock detail 
20:55:10.207 UTC Fri Nov 15 2019
Time source is user configuration

- configure ntp server
    - R1(config)# ntp server 209.165.200.225 
R1(config)# end 
R1# show clock detail 
21:01:34.563 UTC Fri Nov 15 2019
Time source is NTP

- use ntp association and ntp status to verify
    - R1# show ntp associations   
  address         ref clock       st   when   poll reach  delay  offset   disp
*~209.165.200.225 .GPS.           1     61     64   377  0.481   7.480  4.261
 
R1# show ntp status 
Clock is synchronized, stratum 2, reference is 209.165.200.225

- configure switch with router ip as ntp
    - S1(config)# ntp server 192.168.1.1
S1(config)# end

## Simple Network Management Protocol

## Syslog
Accessing System Messages. Syslog uses UDP port 514 to send event notification messages across IP networks to event message collectors.

The syslog logging service provides three primary functions, as follows:
- The ability to gather logging information for monitoring and troubleshooting
- The ability to select the type of logging information that is captured
- The ability to specify the destinations of captured syslog messages

On Cisco network devices, the syslog protocol starts by sending system messages and debug output to a local logging process that is internal to the device.

As shown in the figure, popular destinations for syslog messages include the following:

- Logging buffer (RAM inside a router or switch)
- Console line
- Terminal line
- Syslog server

Levels:
Each syslog level has its own meaning:

- Warning Level 4 - Emergency Level 0: These messages are error messages about software or hardware malfunctions; these types of messages mean that the functionality of the device is affected. The severity of the issue determines the actual syslog level applied.
- Notification Level 5: This notifications level is for normal, but significant events. For example, interface up or down transitions, and system restart messages are displayed at the notifications level.
- Informational Level 6: This is a normal information message that does not affect device functionality. For example, when a Cisco device is booting, you might see the following informational message: %LICENSE-6-EULA_ACCEPT_ALL: The Right to Use End User License Agreement is accepted.
- Debugging Level 7: This level indicates that the messages are output generated from issuing various debug commands.

Some common syslog message facility codes reported on Cisco IOS routers include:

IF - Identifies that the syslog message was generated by an interface.
IP - Identifies that the syslog message was generated by IP.
OSPF - Identifies that the syslog message was generated by the OSPF routing protocol.
SYS - Identifies that the syslog message was generated by the device operating system.
IPSEC - Identifies that the syslog message was generated by the IP Security encryption protocol.
By default, the format of syslog messages on the Cisco IOS Software is as follows:

%facility-severity-MNEMONIC: description 
For example, sample output on a Cisco switch for an EtherChannel link changing state to up is:

%LINK-3-UPDOWN: Interface Port-channel1, changed state to up

### COnfigure syslog timestamp
use the command service timestamps log datetime to force logged events to display the date and time. As shown in the command output, when the R1 GigabitEthernet 0/0/0 interface is reactivated, the log messages now contain the date and time.

R1(config)# service timestamps log datetime
